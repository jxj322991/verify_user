<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title></title>
</head>
<body>
<div><img src="verify.php" width="100" height="40" id="yzimg" onclick="huan()"></div>
<div><input type="text" id="yzm"></input></div>
<button id="btn">提交</button>
<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.js"></script>
<script type="text/javascript">
    function huan(){
        var num = Math.random() * 10;
        document.getElementById('yzimg').src = 'verify.php?r=' + num;
    }
    $('#btn').click(function(){
        $.post(
                'code.php',
                {'yzm':$('#yzm').val()},
                function(data){
                    if (data == 1) {
                        alert('YES');
                    } else {
                        alert('NO');
                        huan();
                    }
                }
            )
    })
</script>
</body>
</html>